### 프로세스와 쓰레드

- 프로그램을 실행하면 OS로부터 실행에 필요한 자원(메모리)를 할당받아 **프로세스**가 된다
- 프로세스는 프로그램을 수행하는데 필요한 데이터와 메모리, 쓰레드로 구성되어있다
- 프로세스의 자원을 이용하여 실제로 작업을 수행하는 것이 **쓰레드**이다
- 모든 프로세스에는 하나 이상의 쓰레드가 존재하며 둘 이상의 쓰레드를 가진 프로세스를 **멀티 쓰레드 프로세스**라고 한다

### 싱글쓰레드와 멀티쓰레드

![image](https://user-images.githubusercontent.com/76515226/139581701-f21b73df-e4b1-4552-b057-ada29ffc3501.png)

- 두 개의 쓰레드로 두 가지 작업을 할 경우 쓰레드간의 작업 전환에 추가 시간이 걸린다
- 작업 전환을 할 때는 현재 진행 중인 작업의 상태의 정보를 저장하고 읽어 오는 시간이 소요된다
- 쓰레드 스위칭보다 프로세스 스위칭이 더 많은 정보를 저장해야하므로 더 많은 시간이 소요된다
- 프로세스 또는 쓰레드 간의 작업 전환을 컨텍스트 스위칭(Context Switching) 이라고 한다
- 따라서 싱글 코어에서 단순히 CPU만을 사용하는 계산작업이라면 멀티쓰레드보다 싱글쓰레드로 프로그래밍하는 것이 더 효율적이다

### 데몬 쓰레드

- 데몬 쓰레드는 다른 일반 쓰레드의 작업을 돕는 보조적인 역할을 수행하는 쓰레드이다
- 가비지 컬렉터(GC), 워드 프로세서의 자동저장, 화면 자동갱신 등이 이에 해당된다
- 일반 쓰레드가 종료되면 데몬 쓰레드는 강제적으로 종료된다
- 데몬 쓰레드는 무한루프와 조건문을 이용하여 실행 후 대기하고 있다가 특정 조건이 만족되면 작업을 수행하고 다시 대기하도록 작성한다

### 쓰레드의 구현과 실행

```java
// 1. Thread 클래스 상속
class MyThread extends Thread {
    public void run() { /* 작업내용 */ } // Thread 클래스의 run()을 오버라이딩
}

// 2. Runnable 인터페이스 구현
class myThread implements Runnable {
    public void run() { /* 작업내용 */ } // Runnable 인터페이스의 run()을 구현
}

// 쓰레드를 구현한다는 것은 위의 두 방법 중 어떤것을 선택하든지 쓰레드를 통해 작업하고자 하는 내용으로 run()의 몸통{} 을 채우는 것이다
```

### start()와 run()

- main 메서드에서 run()을 호출하는 것은 생성된 쓰레드를 실행시키는 것이 아니라 단순히 클래스에 선언된 메서드를 호출하는 것일 뿐이다
- start()는 새로운 쓰레드가 작업을 실행하는데 필요한 호출스택(call stack)을 생성한 다음에 run()을 호출하여 생성된 호출스택에 run()이 첫 번재로 올라가게 한다
- 모든 쓰레드는 독립적인 작업을 수행하기 위해 자신만의 호출스택을 필요로 한다, 따라서 새로운 쓰레드를 생성하고 실행시킬 때마다 새로운 호출스택이 생성되며 쓰레드가 종료되면 작업에 사용된 호출스택은 소멸된다
- main 메서드의 작업을 수행하는 것도 쓰레드이며 main쓰레드 라고 한다

![image](https://user-images.githubusercontent.com/76515226/139584623-f0903ee7-b5fb-4a67-9cf3-8b74c8579e02.png)

